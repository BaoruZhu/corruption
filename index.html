<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äººæ€§çš„å¼±ç‚¹ - å»‰æ”¿æ•™è‚²æ¨¡æ‹Ÿå™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            max-width: 900px;
            width: 100%;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            color: #333;
            font-size: 36px;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            color: #666;
            font-size: 16px;
            font-style: italic;
        }
        
        .game-area {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .status-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-bottom: 25px;
        }
        
        .status-item {
            background: white;
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .status-item.danger {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 2px 10px rgba(220, 53, 69, 0.3); }
            50% { box-shadow: 0 2px 20px rgba(220, 53, 69, 0.6); }
            100% { box-shadow: 0 2px 10px rgba(220, 53, 69, 0.3); }
        }
        
        .status-label {
            color: #666;
            font-size: 11px;
            margin-bottom: 3px;
            text-transform: uppercase;
            font-weight: 600;
        }
        
        .status-value {
            font-size: 22px;
            font-weight: bold;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            margin-top: 6px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 0.5s ease, background-color 0.3s ease;
        }
        
        .surveillance-indicator {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #28a745;
        }
        
        .surveillance-indicator.warning {
            background: #ffc107;
            animation: blink 1.5s infinite;
        }
        
        .surveillance-indicator.danger {
            background: #dc3545;
            animation: blink 0.5s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        .scenario {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .scenario-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .scenario-title {
            font-size: 20px;
            color: #333;
            display: flex;
            align-items: center;
        }
        
        .scenario-stage {
            display: inline-block;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 3px 12px;
            border-radius: 15px;
            font-size: 11px;
            margin-left: 10px;
        }
        
        .scenario-counter {
            color: #999;
            font-size: 14px;
        }
        
        .scenario-text {
            color: #555;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .thought-bubble {
            background: linear-gradient(135deg, #fff3cd, #ffe5b4);
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            font-style: italic;
            color: #856404;
            position: relative;
        }
        
        .thought-bubble::before {
            content: "ğŸ’­";
            position: absolute;
            left: -10px;
            top: -10px;
            font-size: 24px;
        }
        
        .choices {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .choice-btn {
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 15px;
            position: relative;
        }
        
        .choice-btn:hover {
            border-color: #764ba2;
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(118, 75, 162, 0.2);
        }
        
        .choice-risk {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 12px;
            font-weight: bold;
            padding: 3px 8px;
            border-radius: 12px;
        }
        
        .risk-low { 
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .risk-medium { 
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeeba;
        }
        .risk-high { 
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .game-over {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #dc3545, #a01e28);
            color: white;
            border-radius: 15px;
            display: none;
            box-shadow: 0 10px 40px rgba(220, 53, 69, 0.3);
        }
        
        .game-over.success {
            background: linear-gradient(135deg, #28a745, #1e7e34);
        }
        
        .game-over h2 {
            font-size: 32px;
            margin-bottom: 20px;
        }
        
        .ending-stats {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
        }
        
        .stat-line {
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
        }
        
        .restart-btn {
            margin-top: 20px;
            padding: 14px 35px;
            background: white;
            color: #dc3545;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .success .restart-btn {
            color: #28a745;
        }
        
        .restart-btn:hover {
            background: #f8f9fa;
            transform: scale(1.05);
        }
        
        .warning-message {
            background: linear-gradient(135deg, #fff3cd, #ffe5b4);
            border: 2px solid #ffc107;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .warning-message strong {
            color: #856404;
            display: block;
            margin-bottom: 5px;
            font-size: 18px;
        }
        
        .stage-progress {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 0 10px;
        }
        
        .stage-dot {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #999;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .stage-dot.completed {
            background: #28a745;
            color: white;
        }
        
        .stage-dot.current {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            transform: scale(1.2);
        }
        
        .stage-dot::after {
            content: '';
            position: absolute;
            left: 100%;
            top: 50%;
            transform: translateY(-50%);
            width: calc((100vw - 900px) / 10);
            max-width: 50px;
            height: 2px;
            background: #e0e0e0;
        }
        
        .stage-dot:last-child::after {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš–ï¸ äººæ€§çš„å¼±ç‚¹</h1>
            <p class="subtitle">å»‰æ”¿æ•™è‚²æ¨¡æ‹Ÿå™¨ - ä½“éªŒé“å¾·æŠ‰æ‹©çš„å¿ƒè·¯å†ç¨‹</p>
        </div>
        
        <div class="warning-message">
            <strong>âš ï¸ æ•™è‚²è­¦ç¤º</strong>
            æœ¬æ¨¡æ‹Ÿå™¨ä»…ä¾›å»‰æ”¿æ•™è‚²ä½¿ç”¨ï¼Œé€šè¿‡å±•ç¤ºäººæ€§å¼±ç‚¹å’Œå •è½è¿‡ç¨‹ï¼Œæé«˜åè…å€¡å»‰æ„è¯†
        </div>
        
        <div class="game-area">
            <div class="stage-progress" id="stageProgress">
                <!-- åŠ¨æ€ç”Ÿæˆé˜¶æ®µè¿›åº¦ -->
            </div>
            
            <div class="status-bar">
                <div class="status-item" id="morality-item">
                    <div class="surveillance-indicator" id="morality-indicator"></div>
                    <div class="status-label">é“å¾·åº•çº¿</div>
                    <div class="status-value" id="morality">100</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="morality-bar" style="width: 100%; background: #28a745;"></div>
                    </div>
                </div>
                <div class="status-item">
                    <div class="status-label">è´ªè…ç¨‹åº¦</div>
                    <div class="status-value" id="corruption">0</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="corruption-bar" style="width: 0%; background: #dc3545;"></div>
                    </div>
                </div>
                <div class="status-item">
                    <div class="status-label">ç„¦è™‘ç¨‹åº¦</div>
                    <div class="status-value" id="anxiety">0</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="anxiety-bar" style="width: 0%; background: #ffc107;"></div>
                    </div>
                </div>
                <div class="status-item">
                    <div class="status-label">ä¾¥å¹¸å¿ƒç†</div>
                    <div class="status-value" id="luck">0</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="luck-bar" style="width: 0%; background: #6f42c1;"></div>
                    </div>
                </div>
                <div class="status-item" id="surveillance-item">
                    <div class="surveillance-indicator" id="surveillance-indicator"></div>
                    <div class="status-label">çºªå§”å¯Ÿè§‰</div>
                    <div class="status-value" id="surveillance">0</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="surveillance-bar" style="width: 0%; background: #dc3545;"></div>
                    </div>
                </div>
            </div>
            
            <div class="scenario" id="scenario">
                <div class="scenario-header">
                    <div class="scenario-title">
                        <span id="scenario-title">åˆå…¥èŒåœº</span>
                        <span class="scenario-stage" id="stage">ç¬¬ä¸€é˜¶æ®µ</span>
                    </div>
                    <div class="scenario-counter" id="counter">1/10</div>
                </div>
                <div class="scenario-text" id="scenario-text">
                    <!-- åŠ¨æ€ç”Ÿæˆåœºæ™¯æ–‡æœ¬ -->
                </div>
                <div class="thought-bubble" id="thought">
                    <!-- åŠ¨æ€ç”Ÿæˆå†…å¿ƒç‹¬ç™½ -->
                </div>
                <div class="choices" id="choices">
                    <!-- åŠ¨æ€ç”Ÿæˆé€‰é¡¹ -->
                </div>
            </div>
            
            <div class="game-over" id="gameOver">
                <h2>âš–ï¸ æœ€ç»ˆç»“å±€</h2>
                <p id="ending-text" style="font-size: 18px; margin-bottom: 20px;"><!-- ç»“å±€æ–‡æœ¬ --></p>
                <div class="ending-stats" id="endingStats">
                    <!-- æœ€ç»ˆç»Ÿè®¡ -->
                </div>
                <button class="restart-btn" onclick="restartGame()">é‡æ–°å¼€å§‹</button>
            </div>
        </div>
    </div>
    
    <script>
        // æ¸¸æˆçŠ¶æ€
        let gameState = {
            morality: 100,
            corruption: 0,
            anxiety: 0,
            luck: 0,
            surveillance: 0,
            stage: 0,
            choices: []
        };
        
        // 10ä¸ªé˜¶æ®µçš„åœºæ™¯æ•°æ®ï¼ˆå·²å¢å¼ºå‰§æƒ…ï¼‰
        const scenarios = [
            {
                title: "æƒåŠ›çš„ä¾¿åˆ©",
                stage: "ç¬¬ä¸€é˜¶æ®µ",
                text: "ä½ åˆšå½“ä¸Šå‰¯ç§‘é•¿ï¼Œä¸€ä½è¿œæˆ¿äº²æˆšç„¦æ€¥åœ°æ‰¾åˆ°ä½ ï¼Œè¯´å­©å­ä¸Šå­¦åé¢ä¸å¤Ÿï¼Œå¸Œæœ›ä½ èƒ½è·Ÿæ•™è‚²éƒ¨é—¨çš„åŒäº‹'æ‰“ä¸ªæ‹›å‘¼'ã€‚è¿™ä¸æ¶‰åŠé‡‘é’±ï¼Œåªæ˜¯åˆ©ç”¨ä½ çš„èŒåŠ¡å½±å“åŠ›ã€‚",
                thought: "åªæ˜¯æ‰“ä¸ªæ‹›å‘¼ï¼Œåˆä¸æ˜¯å—è´¿ï¼Œä¸ºäº†äº²æˆšåŠç‚¹äº‹ä¹Ÿç®—äººä¹‹å¸¸æƒ…å§ï¼Ÿä»¥åä¹Ÿå¥½è§é¢ã€‚ä½†è¿™ä¹Ÿæ˜¯ç”¨æƒåŠ›ä¸ºä¸ªäººè°‹ç§çš„å¼€å§‹...",
                choices: [
                    { text: "å©‰è¨€æ‹’ç»ï¼Œå‘Šè¯‰äº²æˆšå¿…é¡»æŒ‰è§„å®šæµç¨‹åŠ", risk: "low", morality: 5, corruption: 0, anxiety: -5, luck: -5, surveillance: 0 },
                    { text: "ç­”åº”ç»™ç›¸å…³éƒ¨é—¨çš„ç†Ÿäººæ‰“ä¸ªç”µè¯'å…³å¿ƒä¸€ä¸‹'", risk: "medium", morality: -10, corruption: 8, anxiety: 10, luck: 10, surveillance: 3 },
                    { text: "ç›´æ¥ç»™å¯¹å£éƒ¨é—¨é¢†å¯¼æ‰“ç”µè¯ï¼Œè¦æ±‚'åŠ¡å¿…è§£å†³'", risk: "high", morality: -18, corruption: 15, anxiety: 15, luck: 18, surveillance: 7 }
                ]
            },
            {
                title: "å±é™©çš„'ç¤¼ç‰©'",
                stage: "ç¬¬äºŒé˜¶æ®µ",
                text: "ä½ è´Ÿè´£ä¸€ä¸ªé¡¹ç›®å®¡æ‰¹ã€‚ä¸€ä½å•†äººä¸ºäº†æ„Ÿè°¢ä½ ä¹‹å‰çš„'å…³å¿ƒ'ï¼Œåœ¨ä½ ç”Ÿæ—¥æ—¶é€æ¥ä¸€å—åè´µæ‰‹è¡¨ã€‚ä»–æ”¾ä¸‹å°±èµ°ï¼Œä½ ç”šè‡³æ¥ä¸åŠæ‹’ç»ã€‚",
                thought: "è¿™è¡¨å¤ªè´µé‡äº†ï¼Œæ˜æ˜¾è¶…å‡ºäº†æ­£å¸¸äººæƒ…å¾€æ¥ã€‚ä½†é€€å›å»å¯èƒ½ä¼šå¾—ç½ªä»–ï¼Œé¡¹ç›®åç»­è¿˜éœ€è¦ä»–é…åˆã€‚è€Œä¸”ï¼Œè¿™å—è¡¨çœŸçš„å¾ˆæ¼‚äº®...",
                choices: [
                    { text: "ç«‹åˆ»å°†æ‰‹è¡¨ä¸Šäº¤ç»„ç»‡æˆ–çºªå§”ï¼Œå¹¶è¯´æ˜æƒ…å†µ", risk: "low", morality: 10, corruption: -5, anxiety: -10, luck: -8, surveillance: -5 },
                    { text: "å°†æ‰‹è¡¨æŠ˜ç®—æˆç°é‡‘ï¼ŒåŒ¿åæèµ ç»™æ…ˆå–„æœºæ„", risk: "medium", morality: -8, corruption: 15, anxiety: 18, luck: 12, surveillance: 10 },
                    { text: "å·å·æ”¶ä¸‹ï¼Œä»¥åæ‰¾æœºä¼š'å›æŠ¥'ä»–", risk: "high", morality: -25, corruption: 25, anxiety: 25, luck: 25, surveillance: 15 }
                ]
            },
            {
                title: "æ„å¤–çš„'æŠ•èµ„'",
                stage: "ç¬¬ä¸‰é˜¶æ®µ",
                text: "ä½ æ™‹å‡ä¸ºå¤„é•¿ã€‚ä¹‹å‰é‚£ä½å•†äººæ‰¾åˆ°ä½ ï¼Œè¯´ä»–æœ‰ä¸€ä¸ªå›æŠ¥ç‡æé«˜çš„'å†…éƒ¨é¡¹ç›®'ï¼Œå¯ä»¥è®©ä½ ç”¨è¿œä½äºå¸‚åœºçš„ä»·æ ¼'æŠ•èµ„'50ä¸‡ï¼Œå¹¶æš—ç¤ºè¿™æ˜¯ç¨³èµšä¸èµ”çš„ä¹°å–ã€‚",
                thought: "è¿™ä¸å°±æ˜¯å˜ç›¸é€é’±å—ï¼Ÿä½†å½¢å¼ä¸Šæ˜¯'æŠ•èµ„'ï¼Œä¼¼ä¹æ¯”ç›´æ¥æ”¶é’±è¦å®‰å…¨ã€‚æœ‰äº†è¿™ç¬”é’±ï¼Œå°±èƒ½è§£å†³å®¶é‡Œçš„ç‡ƒçœ‰ä¹‹æ€¥äº†...",
                choices: [
                    { text: "ä¸¥è¯æ‹’ç»ï¼Œå¹¶è­¦å‘Šä»–ä¸è¦å†æœ‰ç±»ä¼¼è¡Œä¸º", risk: "low", morality: 12, corruption: -10, anxiety: -15, luck: -10, surveillance: -8 },
                    { text: "çŠ¹è±«ä¸å†³ï¼Œè¯´éœ€è¦æ—¶é—´è€ƒè™‘ï¼Œçœ‹ä»–ååº”", risk: "medium", morality: -15, corruption: 20, anxiety: 30, luck: 20, surveillance: 20 },
                    { text: "ç”¨é…å¶æˆ–äº²æˆšçš„åä¹‰'æŠ•èµ„'è¿™ç¬”é’±", risk: "high", morality: -35, corruption: 40, anxiety: 40, luck: 35, surveillance: 30 }
                ]
            },
            {
                title: "è‡´å‘½çš„è¯±æƒ‘",
                stage: "ç¬¬å››é˜¶æ®µ",
                text: "åœ¨ä¸€æ¬¡å¤–åœ°è€ƒå¯Ÿä¸­ï¼Œåˆä½œæ–¹å®‰æ’äº†ä¸€ä½å¹´è½»è²Œç¾çš„å¼‚æ€§ä½œä¸º'å‘å¯¼'è´´èº«é™ªåŒï¼Œå¹¶åœ¨æ™šä¸Šæš—ç¤ºå¯ä»¥æä¾›'ç‰¹æ®ŠæœåŠ¡'ã€‚ä½ æ„è¯†åˆ°è¿™å¯èƒ½æ˜¯ä¸€ä¸ªé¢„è®¾çš„é™·é˜±ã€‚",
                thought: "è¿™æ˜¯å…¸å‹çš„'èœœç½'é™·é˜±ï¼ä¸€æ—¦é™·è¿›å»ï¼Œå°±ä¼šè¢«äººæŠ“ä½æŠŠæŸ„ï¼Œå½»åº•æ§åˆ¶ã€‚ä½†...å†…å¿ƒçš„æ¬²æœ›åˆåœ¨è ¢è ¢æ¬²åŠ¨...",
                choices: [
                    { text: "å½“æ™šå€Ÿæ•…èº«ä½“ä¸é€‚ï¼Œé—­é—¨ä¸å‡ºï¼Œå¹¶æå‰ç»“æŸè€ƒå¯Ÿ", risk: "low", morality: 15, corruption: -12, anxiety: -20, luck: -15, surveillance: -10 },
                    { text: "ä¸'å‘å¯¼'ä¿æŒè·ç¦»ï¼Œä½†ç»§ç»­äº«å—é«˜è§„æ ¼æ¥å¾…", risk: "medium", morality: -20, corruption: 25, anxiety: 35, luck: 25, surveillance: 25 },
                    { text: "å¿ƒå­˜ä¾¥å¹¸ï¼Œæ¥å—äº†å¯¹æ–¹çš„'å®‰æ’'", risk: "high", morality: -50, corruption: 50, anxiety: 60, luck: 40, surveillance: 45 }
                ]
            },
            {
                title: "è¢«è¿«çš„æ†ç»‘",
                stage: "ç¬¬äº”é˜¶æ®µ",
                text: "é‚£ä½å•†äººæ‹¿æ¥ä¸€ä¸ªè¿è§„é¡¹ç›®ï¼Œè¦æ±‚ä½ å®¡æ‰¹é€šè¿‡ã€‚å½“ä½ è¡¨ç¤ºä¸ºéš¾æ—¶ï¼Œä»–æ‹¿å‡ºäº†ä¸€å¼ ä½ å’Œé‚£ä½'å‘å¯¼'çš„äº²å¯†ç…§ç‰‡ï¼Œå¾®ç¬‘ç€è¯´ï¼š'æˆ‘ä»¬ç°åœ¨æ˜¯è‡ªå·±äººäº†'ã€‚",
                thought: "å®Œäº†ï¼æˆ‘è¢«æŠ“ä½äº†æŠŠæŸ„ã€‚å¦‚æœæ‹’ç»ï¼Œä»–ä¼šæŠŠç…§ç‰‡æ…å‡ºå»ï¼Œæˆ‘çš„å®¶åº­å’Œäº‹ä¸šéƒ½å°†æ¯ç­ã€‚æˆ‘å·²ç»è¢«å½»åº•ç»‘åœ¨è¿™æ¡èˆ¹ä¸Šäº†ã€‚",
                choices: [
                    { text: "å®å¯èº«è´¥åè£‚ï¼Œä¹Ÿè¦æ‹’ç»ç­¾å­—å¹¶å‘ç»„ç»‡å¦ç™½ä¸€åˆ‡", risk: "low", morality: 30, corruption: -30, anxiety: 80, luck: -30, surveillance: 60 },
                    { text: "ä¸ä»–è°ˆåˆ¤ï¼Œè¡¨ç¤ºå¯ä»¥æœ‰é™åº¦å¸®å¿™ï¼Œè¯•å›¾æ‹–å»¶", risk: "medium", morality: -25, corruption: 40, anxiety: 65, luck: 30, surveillance: 50 },
                    { text: "åˆ«æ— é€‰æ‹©ï¼Œä¸ºä»–è¿è§„å®¡æ‰¹ï¼Œä»æ­¤æ·±åº¦æ†ç»‘", risk: "high", morality: -60, corruption: 70, anxiety: 75, luck: 50, surveillance: 65 }
                ]
            },
            {
                title: "æ”»å®ˆåŒç›Ÿ",
                stage: "ç¬¬å…­é˜¶æ®µ",
                text: "ä½ çš„ä¸€ä½ä¸‹å±åœ¨å·¥ä½œä¸­å‡ºç°é‡å¤§å¤±è¯¯ï¼Œé€ æˆäº†ä¸å°çš„æŸå¤±ã€‚ä»–ç§ä¸‹å‘ä½ æ±‚æƒ…ï¼Œå¹¶æš—ç¤ºä»–çŸ¥é“ä½ çš„ä¸€äº›'ç§˜å¯†'ã€‚å¸®ä½ å¤„ç†è¿‡å¾ˆå¤šè„æ´»çš„ä¸Šçº§ä¹Ÿæé†’ä½ ï¼Œä¸è¦è®©äº‹æƒ…é—¹å¤§ã€‚",
                thought: "è¿™ä¸ªä¸‹å±æ˜¯æˆ‘çš„å¿ƒè…¹ï¼ŒçŸ¥é“çš„å¤ªå¤šã€‚å¤„ç†ä»–ï¼Œç­‰äºå¼•ç«çƒ§èº«ã€‚ä¿ä»–ï¼Œå°±æ˜¯æŠŠæˆ‘ä»¬ç»“æˆä¸€ä¸ªåˆ©ç›Šå…±åŒä½“ï¼Œä¸€è£ä¿±è£ï¼Œä¸€æŸä¿±æŸã€‚",
                choices: [
                    { text: "åšæŒåŸåˆ™ï¼ŒæŒ‰è§„å®šä¸ŠæŠ¥å¤„ç†ä¸‹å±çš„å¤±è¯¯", risk: "low", morality: 20, corruption: -20, anxiety: 50, luck: -20, surveillance: 40 },
                    { text: "åŠ¨ç”¨èŒæƒï¼Œå°†äº‹ä»¶å‹ä¸‹ï¼Œå¹¶è­¦å‘Šä¸‹å±", risk: "medium", morality: -30, corruption: 50, anxiety: 70, luck: 40, surveillance: 60 },
                    { text: "åšå¾—æ›´ç»ï¼Œæ‰¾ä¸€ä¸ªæ›¿ç½ªç¾Šæ¥æ‰¿æ‹…æ‰€æœ‰è´£ä»»", risk: "high", morality: -70, corruption: 80, anxiety: 85, luck: 60, surveillance: 75 }
                ]
            },
            {
                title: "å¤±æ§çš„å®¶äºº",
                stage: "ç¬¬ä¸ƒé˜¶æ®µ",
                text: "ä½ çš„å¦»å­/ä¸ˆå¤«çœ‹åˆ°ä½ 'æ˜¥é£å¾—æ„'ï¼Œå¼€å§‹èƒŒç€ä½ ä»¥ä½ çš„åä¹‰åœ¨å¤–æ‰¿åŒ…å·¥ç¨‹ã€æ”¶å—å¥½å¤„ã€‚ä½ å‘ç°åï¼Œå®¶ä¸­çˆ†å‘äº†æ¿€çƒˆçš„äº‰åµã€‚",
                thought: "å®¶é—¨å¤±ç«ï¼Œåé™¢ä¸å®ï¼ä¸€æ—¦å®¶äººçš„äº‹è¢«æŸ¥å‡ºæ¥ï¼Œæˆ‘ä¸€æ ·è„±ä¸äº†å¹²ç³»ã€‚æ˜¯æ—¶å€™æ‚¬å´–å‹’é©¬ï¼Œè¿˜æ˜¯æ”¾ä»»è‡ªæµï¼Œå…¨å®¶ä¸€èµ·æ²‰æ²¦ï¼Ÿ",
                choices: [
                    { text: "å¼ºä»¤å®¶äººé€€å›æ‰€æœ‰éæ³•æ‰€å¾—ï¼Œå¹¶ä¸»åŠ¨å‘ç»„ç»‡è¯´æ˜æƒ…å†µ", risk: "low", morality: 25, corruption: -25, anxiety: -30, luck: -25, surveillance: 50 },
                    { text: "ä¸å®¶äººå¤§åµä¸€æ¶ï¼Œä½†æœ€ç»ˆé»˜è®¸ï¼Œåªè¦æ±‚ä»–ä»¬'å°å¿ƒç‚¹'", risk: "medium", morality: -35, corruption: 60, anxiety: 75, luck: 45, surveillance: 70 },
                    { text: "å°†é”™å°±é”™ï¼Œåˆ©ç”¨å®¶äººä½œä¸º'ç™½æ‰‹å¥—'è½¬ç§»å’Œéšè—èµ„äº§", risk: "high", morality: -80, corruption: 90, anxiety: 90, luck: 65, surveillance: 85 }
                ]
            },
            {
                title: "é£å£°é¹¤å”³",
                stage: "ç¬¬å…«é˜¶æ®µ",
                text: "ä½ å¬è¯´ä¸Šçº§çºªå§”æ´¾äº†å·¡è§†ç»„ä¸‹æ¥ï¼Œè€Œä¸”ä½ è¿‡å»çš„æŸä½'ç›Ÿå‹'å·²ç»è¢«'åŒè§„'ã€‚ä½ æ„Ÿåˆ°æ°”æ°›è¶Šæ¥è¶Šç´§å¼ ï¼Œå¤œé‡Œç»å¸¸è¢«å™©æ¢¦æƒŠé†’ã€‚",
                thought: "è°ƒæŸ¥çš„ç½‘æ­£åœ¨æ”¶ç´§ï¼Œä¸‹ä¸€ä¸ªä¼šä¸ä¼šå°±æ˜¯æˆ‘ï¼Ÿæ˜¯åä»¥å¾…æ¯™ï¼Œè¿˜æ˜¯åšç‚¹ä»€ä¹ˆæ¥'è‡ªæ•‘'ï¼Ÿæ—¶é—´ä¸å¤šäº†ã€‚",
                choices: [
                    { text: "ä¸»åŠ¨è”ç³»å·¡è§†ç»„ï¼Œäº¤ä»£è‡ªå·±çŸ¥é“çš„é—®é¢˜ä»¥æ±‚ç«‹åŠŸ", risk: "low", morality: 35, corruption: -40, anxiety: -40, luck: -40, surveillance: 70 },
                    { text: "ä¸å‰©ä¸‹çš„'ç›Ÿå‹'ä¸²é€šï¼Œè®¢ç«‹æ”»å®ˆåŒç›Ÿï¼Œç»Ÿä¸€å£å¾„", risk: "medium", morality: -40, corruption: 70, anxiety: 85, luck: 50, surveillance: 90 },
                    { text: "ç«‹åˆ»å¼€å§‹é”€æ¯è¯æ®ï¼Œå¹¶å‡†å¤‡å¥½æŠ¤ç…§å’Œèµ„é‡‘å‡†å¤‡å¤–é€ƒ", risk: "high", morality: -90, corruption: 95, anxiety: 95, luck: 70, surveillance: 95 }
                ]
            },
            {
                title: "æœ€åçš„è°ˆè¯",
                stage: "ç¬¬ä¹é˜¶æ®µ",
                text: "åœ¨ä¸€ä¸ªå®‰é™çš„æˆ¿é—´é‡Œï¼Œä¸¤ä½çºªå§”çš„åŒå¿—ååœ¨ä½ å¯¹é¢ï¼Œè¡¨æƒ…ä¸¥è‚ƒã€‚ä»–ä»¬å¼€é—¨è§å±±ï¼š'æˆ‘ä»¬æ˜¯æ¥æ‰¾ä½ æ ¸å®ä¸€äº›é—®é¢˜çš„ï¼Œå¸Œæœ›ä½ çæƒœè¿™æ¬¡æœºä¼š'ã€‚",
                thought: "è¿™ä¸€å¤©ç»ˆç©¶è¿˜æ˜¯æ¥äº†ã€‚ä»–ä»¬åˆ°åº•æŒæ¡äº†å¤šå°‘ï¼Ÿæ˜¯å¦ç™½ä»å®½ï¼Œè¿˜æ˜¯æŠ—æ‹’åˆ°åº•ï¼Ÿæˆ‘çš„ä¸€ä¸ªå¿µå¤´ï¼Œå°†å†³å®šæˆ‘çš„ä½™ç”Ÿã€‚",
                choices: [
                    { text: "å¿ƒç†é˜²çº¿å´©æºƒï¼Œå¦‚å®äº¤ä»£è‡ªå·±çš„å…¨éƒ¨é—®é¢˜", risk: "low", morality: 40, corruption: -50, anxiety: -50, luck: -50, surveillance: 98 },
                    { text: "é¿é‡å°±è½»ï¼Œåªæ‰¿è®¤ä¸€äº›å°é—®é¢˜ï¼Œè¯•å›¾è’™æ··è¿‡å…³", risk: "medium", morality: -50, corruption: 80, anxiety: 90, luck: 55, surveillance: 99 },
                    { text: "å…¨ç›˜å¦è®¤ï¼Œå£°ç§°è‡ªå·±æ˜¯æ¸…ç™½çš„ï¼Œé­äººé™·å®³", risk: "high", morality: -100, corruption: 100, anxiety: 100, luck: 75, surveillance: 100 }
                ]
            },
            {
                title: "ç»ˆå±€",
                stage: "æœ€ç»ˆé˜¶æ®µ",
                text: "è°ƒæŸ¥å·²ç»åŸºæœ¬ç»“æŸï¼Œè¯æ®é“¾å®Œæ•´ã€‚ç»„ç»‡ç»™ä½ æœ€åä¸€ä¸ªé€‰æ‹©ï¼šæ˜¯ç§¯æé€€èµƒï¼Œè¯´æœå®¶äººé…åˆè°ƒæŸ¥ï¼Œäº‰å–å®½å¤§å¤„ç†ï¼›è¿˜æ˜¯é¡½æŠ—åˆ°åº•ã€‚",
                thought: "äººç”Ÿæ²¡æœ‰å›å¤´è·¯ã€‚æˆ‘ä¸ä»…æ¯äº†è‡ªå·±ï¼Œä¹Ÿæ¯äº†å®¶åº­ã€‚ç°åœ¨å”¯ä¸€èƒ½åšçš„ï¼Œæ˜¯ä¸ºå®¶äººäº‰å–ä¸€ä¸ªå°½å¯èƒ½å¥½çš„æœªæ¥ï¼Œæˆ–æ˜¯ä¸€èµ·èµ°å‘æ¯ç­ã€‚",
                choices: [
                    { text: "å…¨é¢é…åˆï¼Œé€€ç¼´æ‰€æœ‰èµƒæ¬¾ï¼Œå¹¶è§„åŠå®¶äººè‡ªé¦–", risk: "low", morality: 50, corruption: -60, anxiety: -60, luck: -60, surveillance: 100 },
                    { text: "åªé€€éƒ¨åˆ†èµƒæ¬¾ï¼Œå¹¶è®©å®¶äººæºå¸¦èµ„äº§å¤–é€ƒ", risk: "medium", morality: -60, corruption: 90, anxiety: 95, luck: 60, surveillance: 100 },
                    { text: "ç”¨æœ€åçš„åŠ›æ°”ï¼Œå¨èƒè¦ä¸¾æŠ¥æ›´é«˜çº§åˆ«çš„é¢†å¯¼", risk: "high", morality: -100, corruption: 100, anxiety: 100, luck: 80, surveillance: 100 }
                ]
            }
        ];
        
        // åˆå§‹åŒ–é˜¶æ®µè¿›åº¦
        function initStageProgress() {
            const progressDiv = document.getElementById('stageProgress');
            progressDiv.innerHTML = '';
            for (let i = 0; i < 10; i++) {
                const dot = document.createElement('div');
                dot.className = 'stage-dot';
                dot.textContent = i + 1;
                dot.id = `stage-dot-${i}`;
                progressDiv.appendChild(dot);
            }
        }
        
        // æ›´æ–°é˜¶æ®µè¿›åº¦
        function updateStageProgress() {
            for (let i = 0; i < 10; i++) {
                const dot = document.getElementById(`stage-dot-${i}`);
                if (i < gameState.stage) {
                    dot.classList.add('completed');
                    dot.classList.remove('current');
                } else if (i === gameState.stage) {
                    dot.classList.add('current');
                    dot.classList.remove('completed');
                } else {
                    dot.classList.remove('completed', 'current');
                }
            }
        }
        
        // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
        function updateStatus() {
            // æ›´æ–°æ•°å€¼
            document.getElementById('morality').textContent = Math.max(0, Math.min(100, gameState.morality));
            document.getElementById('corruption').textContent = Math.max(0, Math.min(100, gameState.corruption));
            document.getElementById('anxiety').textContent = Math.max(0, Math.min(100, gameState.anxiety));
            document.getElementById('luck').textContent = Math.max(0, Math.min(100, gameState.luck));
            document.getElementById('surveillance').textContent = Math.max(0, Math.min(100, gameState.surveillance));
            
            // æ›´æ–°è¿›åº¦æ¡
            document.getElementById('morality-bar').style.width = gameState.morality + '%';
            document.getElementById('corruption-bar').style.width = gameState.corruption + '%';
            document.getElementById('anxiety-bar').style.width = gameState.anxiety + '%';
            document.getElementById('luck-bar').style.width = gameState.luck + '%';
            document.getElementById('surveillance-bar').style.width = gameState.surveillance + '%';
            
            // æ ¹æ®æ•°å€¼æ”¹å˜é¢œè‰²
            const moralityBar = document.getElementById('morality-bar');
            if (gameState.morality > 70) {
                moralityBar.style.background = '#28a745';
            } else if (gameState.morality > 30) {
                moralityBar.style.background = '#ffc107';
            } else {
                moralityBar.style.background = '#dc3545';
            }
            
            // æ›´æ–°ç›‘å¯ŸæŒ‡ç¤ºå™¨
            const surveillanceIndicator = document.getElementById('surveillance-indicator');
            const surveillanceItem = document.getElementById('surveillance-item');
            if (gameState.surveillance >= 70) {
                surveillanceIndicator.className = 'surveillance-indicator danger';
                surveillanceItem.classList.add('danger');
            } else if (gameState.surveillance >= 40) {
                surveillanceIndicator.className = 'surveillance-indicator warning';
                surveillanceItem.classList.remove('danger');
            } else {
                surveillanceIndicator.className = 'surveillance-indicator';
                surveillanceItem.classList.remove('danger');
            }
            
            // é“å¾·æŒ‡ç¤ºå™¨
            const moralityIndicator = document.getElementById('morality-indicator');
            if (gameState.morality <= 30) {
                moralityIndicator.className = 'surveillance-indicator danger';
            } else if (gameState.morality <= 60) {
                moralityIndicator.className = 'surveillance-indicator warning';
            } else {
                moralityIndicator.className = 'surveillance-indicator';
            }
        }
        
        // æ˜¾ç¤ºåœºæ™¯
        function showScenario(index) {
            // ä»»ä½•ä¸€ä¸ªæŒ‡æ ‡è¾¾åˆ°ä¸´ç•Œå€¼ï¼Œæ¸¸æˆç»“æŸ
            if (index >= scenarios.length || gameState.corruption >= 100 || gameState.morality <= 0 || gameState.surveillance >= 100) {
                endGame();
                return;
            }
            
            const scenario = scenarios[index];
            document.getElementById('scenario-title').textContent = scenario.title;
            document.getElementById('stage').textContent = scenario.stage;
            document.getElementById('counter').textContent = `${index + 1}/10`;
            document.getElementById('scenario-text').textContent = scenario.text;
            document.getElementById('thought').innerHTML = scenario.thought;
            
            // ç”Ÿæˆé€‰é¡¹
            const choicesDiv = document.getElementById('choices');
            choicesDiv.innerHTML = '';
            
            scenario.choices.forEach((choice, i) => {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                btn.innerHTML = `
                    ${choice.text}
                    <span class="choice-risk risk-${choice.risk}">
                        ${choice.risk === 'low' ? 'ä½é£é™©' : choice.risk === 'medium' ? 'ä¸­é£é™©' : 'é«˜é£é™©'}
                    </span>
                `;
                btn.onclick = () => makeChoice(choice, index);
                choicesDiv.appendChild(btn);
            });
            
            updateStageProgress();
        }
        
        // åšå‡ºé€‰æ‹©
        function makeChoice(choice, scenarioIndex) {
            // æ›´æ–°çŠ¶æ€
            gameState.morality += choice.morality;
            gameState.corruption += choice.corruption;
            gameState.anxiety += choice.anxiety;
            gameState.luck += choice.luck;
            gameState.surveillance += choice.surveillance;
            
            // ç¡®ä¿æ•°å€¼åœ¨0-100ä¹‹é—´
            gameState.morality = Math.max(0, Math.min(100, gameState.morality));
            gameState.corruption = Math.max(0, Math.min(100, gameState.corruption));
            gameState.anxiety = Math.max(0, Math.min(100, gameState.anxiety));
            gameState.luck = Math.max(0, Math.min(100, gameState.luck));
            gameState.surveillance = Math.max(0, Math.min(100, gameState.surveillance));
            
            // è®°å½•é€‰æ‹©
            gameState.choices.push(choice);
            
            // æ›´æ–°æ˜¾ç¤º
            updateStatus();
            
            // è¿›å…¥ä¸‹ä¸€ä¸ªåœºæ™¯
            setTimeout(() => {
                gameState.stage++;
                showScenario(scenarioIndex + 1);
            }, 500);
        }
        
        // æ¸¸æˆç»“æŸ
        function endGame() {
            document.getElementById('scenario').style.display = 'none';
            document.getElementById('gameOver').style.display = 'block';
            
            let ending = '';
            let endingClass = ''; // ç”¨äºè®¾ç½®ç»“å±€èƒŒæ™¯é¢œè‰²
            
            if (gameState.surveillance >= 100) {
                ending = 'çºªå§”çš„è°ƒæŸ¥å·²ç»å®Œæˆï¼Œä½ çš„æ‰€æœ‰è¿çºªè¿æ³•è¡Œä¸ºéƒ½è¢«æŸ¥æ¸…ã€‚ç­‰å¾…ä½ çš„å°†æ˜¯æ³•å¾‹çš„ä¸¥æƒ©ã€‚å¤šè¡Œä¸ä¹‰å¿…è‡ªæ¯™ï¼Œè´ªè…ä¹‹è·¯çš„å°½å¤´åªæœ‰æ¯ç­ã€‚';
                endingClass = ''; // é»˜è®¤çº¢è‰²
            } else if (gameState.morality >= 80) {
                ending = 'ä½ å§‹ç»ˆä¿æŒäº†æ¸…æ­£å»‰æ´ï¼Œæˆä¸ºäº†äººæ°‘çš„å¥½å…¬ä»†ã€‚è™½ç„¶è¯±æƒ‘é‡é‡ï¼Œä½†ä½ åšå®ˆä½äº†é“å¾·åº•çº¿ï¼Œèµ¢å¾—äº†ç»„ç»‡çš„ä¿¡ä»»å’Œç¾¤ä¼—çš„å°Šé‡ã€‚';
                endingClass = 'success'; // ç»¿è‰²
                document.getElementById('gameOver').classList.add('success');
            } else if (gameState.corruption >= 80) {
                ending = 'ä½ å·²ç»å®Œå…¨å •è½ï¼Œæˆä¸ºäº†äººæ°‘çš„ç½ªäººã€‚è´ªè…ä¸ä»…æ¯äº†ä½ çš„å‰ç¨‹ï¼Œè¿˜ç»™å®¶äººå¸¦æ¥äº†æ— å°½çš„ç—›è‹¦å’Œè€»è¾±ã€‚ä½ çš„åå­—å°†æ°¸è¿œé’‰åœ¨è€»è¾±æŸ±ä¸Šã€‚';
                endingClass = '';
            } else if (gameState.anxiety >= 90) {
                ending = 'é•¿æœŸçš„ç„¦è™‘å’Œææƒ§å·²ç»æ‘§æ¯äº†ä½ çš„èº«å¿ƒã€‚ä½ æ´»åœ¨éšæ—¶å¯èƒ½è¢«å‘ç°çš„ææƒ§ä¸­ï¼Œè¿™ç§ç²¾ç¥æŠ˜ç£¨æ¯”ä»»ä½•æƒ©ç½šéƒ½è¦ç—›è‹¦ã€‚';
                endingClass = '';
            } else if (gameState.morality <= 20) {
                ending = 'é“å¾·å®Œå…¨æ²¦ä¸§ï¼Œä½ å·²ç»å˜æˆäº†å¦ä¸€ä¸ªäººã€‚æ›¾ç»çš„ç†æƒ³å’Œä¿¡å¿µéƒ½è¢«æŠ›å¼ƒï¼Œå‰©ä¸‹çš„åªæœ‰å¯¹é‡‘é’±å’ŒæƒåŠ›çš„è´ªå©ªã€‚';
                endingClass = '';
            } else {
                ending = 'ä½ åœ¨å–„æ¶ä¹‹é—´æ‘‡æ‘†ï¼Œè™½æœªå®Œå…¨å •è½ï¼Œä½†ä¹Ÿåç¦»äº†æ­£é“ã€‚äººç”Ÿè¿˜æœ‰æœºä¼šå›å¤´ï¼Œå…³é”®çœ‹ä½ å¦‚ä½•é€‰æ‹©ã€‚';
                endingClass = '';
            }
            
            document.getElementById('ending-text').textContent = ending;
            
            // æ˜¾ç¤ºæœ€ç»ˆç»Ÿè®¡
            const stats = `
                <div class="stat-line">
                    <span>é“å¾·åº•çº¿ï¼š</span>
                    <span>${gameState.morality}%</span>
                </div>
                <div class="stat-line">
                    <span>è´ªè…ç¨‹åº¦ï¼š</span>
                    <span>${gameState.corruption}%</span>
                </div>
                <div class="stat-line">
                    <span>çºªå§”å¯Ÿè§‰åº¦ï¼š</span>
                    <span>${gameState.surveillance}%</span>
                </div>
                <div class="stat-line">
                    <span>å®Œæˆé˜¶æ®µï¼š</span>
                    <span>${gameState.stage}/10</span>
                </div>
            `;
            document.getElementById('endingStats').innerHTML = stats;
        }
        
        // é‡æ–°å¼€å§‹
        function restartGame() {
            gameState = {
                morality: 100,
                corruption: 0,
                anxiety: 0,
                luck: 0,
                surveillance: 0,
                stage: 0,
                choices: []
            };
            
            document.getElementById('gameOver').classList.remove('success'); // ç§»é™¤æˆåŠŸæ ·å¼
            updateStatus();
            initStageProgress();
            document.getElementById('scenario').style.display = 'block';
            document.getElementById('gameOver').style.display = 'none';
            showScenario(0);
        }
        
        // åˆå§‹åŒ–æ¸¸æˆ
        initStageProgress();
        updateStatus();
        showScenario(0);
    </script>
</body>
</html>
